
<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Click MOM ‚Äî Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-brand">
            <div class="sb-icon"><i class="fas fa-clipboard-list"></i></div>
            <div class="sb-text">
                <span class="sb-name">One Click MOM</span>
                <span class="sb-version">v2.0 Dashboard</span>
            </div>
        </div>

        <div class="sidebar-nav">
            <div class="nav-section-label">Main</div>
            <button class="nav-item active" data-module="dashboard">
                <i class="fas fa-th-large"></i><span>Dashboard</span>
            </button>

            <div class="nav-section-label">Input</div>
            <button class="nav-item" data-module="connector">
                <i class="fas fa-plug"></i><span>Platform Connect</span>
                <span class="nav-badge" id="connBadge">‚Äî</span>
            </button>
            <button class="nav-item" data-module="input">
                <i class="fas fa-keyboard"></i><span>Transcript Input</span>
            </button>

            <div class="nav-section-label">Processing</div>
            <button class="nav-item" data-module="ai-config">
                <i class="fas fa-brain"></i><span>AI Engine</span>
                <span class="nav-badge ai-badge" id="aiBadge">‚Äî</span>
            </button>

            <div class="nav-section-label">Output</div>
            <button class="nav-item" data-module="minutes">
                <i class="fas fa-file-alt"></i><span>Meeting Minutes</span>
            </button>
            <button class="nav-item" data-module="carbon">
                <i class="fas fa-leaf"></i><span>Carbon Footprint</span>
            </button>
            <button class="nav-item" data-module="export">
                <i class="fas fa-download"></i><span>Export & Share</span>
            </button>

            <div class="nav-section-label">Info</div>
            <button class="nav-item" data-module="sdg">
                <i class="fas fa-globe"></i><span>SDG Alignment</span>
            </button>
        </div>

        <div class="sidebar-footer">
            <button class="sf-btn" id="themeToggle"><i class="fas fa-moon"></i></button>
            <button class="sf-btn" id="sidebarCollapse"><i class="fas fa-chevron-left"></i></button>
        </div>
    </aside>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN CONTENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="main" id="main">

        <!-- Top Bar -->
        <header class="topbar">
            <button class="topbar-menu" id="menuToggle"><i class="fas fa-bars"></i></button>
            <div class="topbar-title" id="topbarTitle">
                <i class="fas fa-th-large"></i>
                <span>Dashboard Overview</span>
            </div>
            <div class="topbar-right">
                <div class="topbar-status" id="topbarStatus">
                    <div class="status-dot"></div><span>Ready</span>
                </div>
                <div class="topbar-pipeline" id="topbarPipeline">
                    <div class="pipe-step done" data-tip="Connect"><i class="fas fa-plug"></i></div>
                    <div class="pipe-line"></div>
                    <div class="pipe-step" data-tip="Input"><i class="fas fa-keyboard"></i></div>
                    <div class="pipe-line"></div>
                    <div class="pipe-step" data-tip="AI"><i class="fas fa-brain"></i></div>
                    <div class="pipe-line"></div>
                    <div class="pipe-step" data-tip="MOM"><i class="fas fa-file-alt"></i></div>
                    <div class="pipe-line"></div>
                    <div class="pipe-step" data-tip="Carbon"><i class="fas fa-leaf"></i></div>
                </div>
            </div>
        </header>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: DASHBOARD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="module active" id="mod-dashboard">
            <div class="module-header">
                <h2>Dashboard Overview</h2>
                <p>Quick status of all modules</p>
            </div>

            <div class="dash-stats">
                <div class="dash-stat">
                    <div class="ds-icon ds-blue"><i class="fas fa-file-alt"></i></div>
                    <div class="ds-info"><span class="ds-val" id="dsMeetings">0</span><span class="ds-label">Meetings Processed</span></div>
                </div>
                <div class="dash-stat">
                    <div class="ds-icon ds-green"><i class="fas fa-copy"></i></div>
                    <div class="ds-info"><span class="ds-val" id="dsPages">0</span><span class="ds-label">Pages Saved</span></div>
                </div>
                <div class="dash-stat">
                    <div class="ds-icon ds-emerald"><i class="fas fa-leaf"></i></div>
                    <div class="ds-info"><span class="ds-val" id="dsCO2">0.0</span><span class="ds-label">kg CO‚ÇÇ Prevented</span></div>
                </div>
                <div class="dash-stat">
                    <div class="ds-icon ds-amber"><i class="fas fa-tasks"></i></div>
                    <div class="ds-info"><span class="ds-val" id="dsActions">0</span><span class="ds-label">Action Items Tracked</span></div>
                </div>
            </div>

            <div class="dash-grid">
                <!-- Pipeline Status -->
                <div class="dash-card dc-wide">
                    <div class="dc-head"><i class="fas fa-project-diagram"></i><h4>Processing Pipeline</h4></div>
                    <div class="pipeline-visual">
                        <div class="pv-step" id="pvConnect">
                            <div class="pv-circle"><i class="fas fa-plug"></i></div>
                            <span>Connect</span>
                            <small id="pvConnectStatus">Not connected</small>
                        </div>
                        <div class="pv-arrow"><i class="fas fa-arrow-right"></i></div>
                        <div class="pv-step" id="pvInput">
                            <div class="pv-circle"><i class="fas fa-keyboard"></i></div>
                            <span>Input</span>
                            <small id="pvInputStatus">No transcript</small>
                        </div>
                        <div class="pv-arrow"><i class="fas fa-arrow-right"></i></div>
                        <div class="pv-step" id="pvAI">
                            <div class="pv-circle"><i class="fas fa-brain"></i></div>
                            <span>Process</span>
                            <small id="pvAIStatus">Waiting</small>
                        </div>
                        <div class="pv-arrow"><i class="fas fa-arrow-right"></i></div>
                        <div class="pv-step" id="pvMOM">
                            <div class="pv-circle"><i class="fas fa-file-alt"></i></div>
                            <span>Minutes</span>
                            <small id="pvMOMStatus">‚Äî</small>
                        </div>
                        <div class="pv-arrow"><i class="fas fa-arrow-right"></i></div>
                        <div class="pv-step" id="pvCarbon">
                            <div class="pv-circle"><i class="fas fa-leaf"></i></div>
                            <span>Carbon</span>
                            <small id="pvCarbonStatus">‚Äî</small>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="dash-card">
                    <div class="dc-head"><i class="fas fa-bolt"></i><h4>Quick Actions</h4></div>
                    <div class="quick-actions">
                        <button class="qa-btn" data-goto="connector"><i class="fas fa-plug"></i> Connect Platform</button>
                        <button class="qa-btn" data-goto="input"><i class="fas fa-paste"></i> Paste Transcript</button>
                        <button class="qa-btn qa-primary" id="qaGenerate"><i class="fas fa-wand-magic-sparkles"></i> Generate MOM</button>
                        <button class="qa-btn" data-goto="carbon"><i class="fas fa-leaf"></i> View Carbon</button>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="dash-card">
                    <div class="dc-head"><i class="fas fa-history"></i><h4>Recent Activity</h4></div>
                    <div class="activity-list" id="activityList">
                        <div class="activity-empty"><i class="fas fa-inbox"></i><p>No activity yet. Import a transcript to get started.</p></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: CONNECTOR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="module" id="mod-connector">
            <div class="module-header">
                <h2><i class="fas fa-plug"></i> Platform Connector</h2>
                <p>Import meeting data from your preferred platform</p>
            </div>

            <div class="platform-grid">
                <div class="plat-card">
                    <div class="plat-head teams"><i class="fab fa-microsoft"></i><h4>Microsoft Teams</h4><span class="plat-tag">Recommended</span></div>
                    <div class="plat-body">
                        <ul class="plat-features">
                            <li><i class="fas fa-check"></i> VTT transcript</li>
                            <li><i class="fas fa-check"></i> Participant list</li>
                            <li><i class="fas fa-check"></i> Duration & timestamps</li>
                            <li><i class="fas fa-check"></i> Meeting title</li>
                        </ul>
                        <div class="fg"><label>Paste Teams transcript (.vtt/.txt)</label>
                            <textarea id="teamsInput" rows="5" placeholder="WEBVTT&#10;&#10;00:00:01.000 --> 00:00:05.000&#10;<v John>Hello everyone...</v>"></textarea>
                        </div>
                        <button class="btn btn-teams btn-block" id="btnTeams"><i class="fab fa-microsoft"></i> Import from Teams</button>
                    </div>
                </div>
                <div class="plat-card">
                    <div class="plat-head zoom"><i class="fas fa-video"></i><h4>Zoom</h4><span class="plat-tag">Popular</span></div>
                    <div class="plat-body">
                        <ul class="plat-features">
                            <li><i class="fas fa-check"></i> Cloud transcript</li>
                            <li><i class="fas fa-check"></i> Participant list</li>
                            <li><i class="fas fa-check"></i> Duration</li>
                            <li><i class="fas fa-check"></i> Chat messages</li>
                        </ul>
                        <div class="fg"><label>Paste Zoom transcript</label>
                            <textarea id="zoomInput" rows="5" placeholder="Paste Zoom VTT or plain text transcript..."></textarea>
                        </div>
                        <button class="btn btn-zoom btn-block" id="btnZoom"><i class="fas fa-video"></i> Import from Zoom</button>
                    </div>
                </div>
                <div class="plat-card">
                    <div class="plat-head gmeet"><i class="fab fa-google"></i><h4>Google Meet</h4></div>
                    <div class="plat-body">
                        <ul class="plat-features">
                            <li><i class="fas fa-check"></i> Docs transcript</li>
                            <li><i class="fas fa-check"></i> Attendees</li>
                            <li><i class="fas fa-check"></i> Duration</li>
                        </ul>
                        <div class="fg"><label>Paste Google Meet transcript</label>
                            <textarea id="meetInput" rows="5" placeholder="Paste Google Meet transcript..."></textarea>
                        </div>
                        <button class="btn btn-gmeet btn-block" id="btnMeet"><i class="fab fa-google"></i> Import from Meet</button>
                    </div>
                </div>
                <div class="plat-card">
                    <div class="plat-head fileu"><i class="fas fa-file-upload"></i><h4>File Upload</h4></div>
                    <div class="plat-body">
                        <ul class="plat-features">
                            <li><i class="fas fa-check"></i> .txt plain text</li>
                            <li><i class="fas fa-check"></i> .vtt subtitles</li>
                            <li><i class="fas fa-check"></i> .srt subtitles</li>
                        </ul>
                        <div class="drop-zone" id="dropZone">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Drag & drop or click</p>
                            <small>.txt .vtt .srt</small>
                        </div>
                        <input type="file" id="fileUpload" accept=".txt,.vtt,.srt" hidden>
                        <button class="btn btn-file btn-block" id="btnFile"><i class="fas fa-upload"></i> Browse Files</button>
                    </div>
                </div>
            </div>

            <div class="import-result hidden" id="importResult">
                <div class="ir-head"><i class="fas fa-check-circle"></i><h4>Import Successful</h4></div>
                <div class="ir-grid" id="irGrid"></div>
                <button class="btn btn-primary" id="irProceed"><i class="fas fa-arrow-right"></i> Go to Transcript Input</button>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: INPUT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="module" id="mod-input">
            <div class="module-header">
                <h2><i class="fas fa-keyboard"></i> Transcript Input</h2>
                <p>Review, edit, or manually enter meeting transcript</p>
            </div>

            <div class="input-panel">
                <div class="meta-grid">
                    <div class="fg"><label><i class="fas fa-heading"></i> Title</label><input type="text" id="mTitle" placeholder="Sprint Planning"></div>
                    <div class="fg"><label><i class="fas fa-calendar"></i> Date</label><input type="date" id="mDate"></div>
                    <div class="fg"><label><i class="fas fa-clock"></i> Duration (min)</label><input type="number" id="mDur" placeholder="60" min="1"></div>
                    <div class="fg"><label><i class="fas fa-users"></i> Participants</label><input type="number" id="mPart" placeholder="10" min="1"></div>
                    <div class="fg"><label><i class="fas fa-video"></i> Platform</label>
                        <select id="mPlatform">
                            <option value="teams">MS Teams</option><option value="zoom">Zoom</option>
                            <option value="meet">Google Meet</option><option value="webex">Webex</option>
                            <option value="virtual">Other Virtual</option><option value="physical">Physical</option>
                        </select>
                    </div>
                    <div class="fg"><label><i class="fas fa-user-tie"></i> Organizer</label><input type="text" id="mOrg" placeholder="John Smith"></div>
                </div>

                <div class="ta-container">
                    <div class="ta-toolbar">
                        <button class="tb-btn" id="tbSample"><i class="fas fa-magic"></i> Sample</button>
                        <button class="tb-btn" id="tbClear"><i class="fas fa-eraser"></i> Clear</button>
                        <div class="ta-info">
                            <span class="src-badge" id="srcBadge"><i class="fas fa-keyboard"></i> Manual</span>
                            <span id="wordCount">0w</span>
                            <span id="charCount">0c</span>
                        </div>
                    </div>
                    <textarea id="transcript" placeholder="Paste or type your meeting transcript here...&#10;&#10;Supported formats:&#10;  Speaker: Message&#10;  Decision: Approved XYZ&#10;  Action: Person to do thing by date&#10;  Question: Unresolved query?"></textarea>
                </div>

                <button class="btn btn-primary btn-block btn-big" id="btnGenerate">
                    <span id="genLabel"><i class="fas fa-wand-magic-sparkles"></i> Generate Minutes + Carbon Report</span>
                    <span id="genLoader" class="hidden"><span class="spinner"></span><span id="genMsg">Processing‚Ä¶</span></span>
                </button>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: AI CONFIG ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="module" id="mod-ai-config">
            <div class="module-header">
                <h2><i class="fas fa-brain"></i> AI Engine Configuration</h2>
                <p>Choose between AI processing or offline rule-based engine</p>
            </div>

            <div class="ai-grid">
                <div class="ai-option active" id="optAI">
                    <input type="radio" name="eng" value="ai" checked>
                    <div class="ao-icon"><i class="fas fa-brain"></i></div>
                    <div class="ao-info">
                        <strong>AI Engine ‚Äî Groq Llama 3</strong>
                        <p>Cloud-based AI. Contextual understanding. Best results.</p>
                        <a href="https://console.groq.com/keys" target="_blank">Get free API key ‚Üí</a>
                    </div>
                </div>
                <div class="ai-key-box" id="aiKeyBox">
                    <label><i class="fas fa-key"></i> Groq API Key</label>
                    <div class="akb-row">
                        <input type="password" id="apiKey" placeholder="gsk_xxxxxxxx">
                        <button class="btn btn-sm" id="toggleVis"><i class="fas fa-eye"></i></button>
                        <button class="btn btn-sm btn-primary" id="saveApiKey"><i class="fas fa-check"></i> Save & Test</button>
                    </div>
                    <div class="akb-result" id="akbResult"></div>
                </div>
                <div class="ai-option" id="optLocal">
                    <input type="radio" name="eng" value="local">
                    <div class="ao-icon"><i class="fas fa-microchip"></i></div>
                    <div class="ao-info">
                        <strong>Rule Engine (Offline)</strong>
                        <p>Regex + keyword matching. No API needed. Works anywhere.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: MINUTES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="module" id="mod-minutes">
            <div class="module-header">
                <h2><i class="fas fa-file-alt"></i> Meeting Minutes</h2>
                <p>Auto-generated structured minutes</p>
            </div>

            <div class="mom-empty" id="momEmpty">
                <i class="fas fa-file-circle-question"></i>
                <h4>No minutes generated yet</h4>
                <p>Import a transcript and click Generate to create minutes.</p>
                <button class="btn btn-primary" data-goto="input"><i class="fas fa-arrow-left"></i> Go to Input</button>
            </div>

            <div class="mom-content hidden" id="momContent">
                <div class="mom-toolbar">
                    <button class="btn btn-sm" data-goto="export"><i class="fas fa-download"></i> Export</button>
                    <button class="btn btn-sm" id="copyMom"><i class="fas fa-copy"></i> Copy</button>
                    <button class="btn btn-sm" id="printMom"><i class="fas fa-print"></i> Print</button>
                </div>

                <div id="momDoc" class="mom-doc">
                    <div class="ms ms-head">
                        <div class="ms-top"><h3 id="oTitle">‚Äî</h3><div class="badge-row"><span class="badge" id="oBadge">‚Äî</span><span class="badge b2" id="oSrc">‚Äî</span></div></div>
                        <div class="ms-meta"><span><i class="fas fa-calendar"></i><b id="oDate">‚Äî</b></span><span><i class="fas fa-clock"></i><b id="oDur">‚Äî</b></span><span><i class="fas fa-users"></i><b id="oPart">‚Äî</b></span><span><i class="fas fa-video"></i><b id="oPlat">‚Äî</b></span><span><i class="fas fa-user-tie"></i><b id="oOrg">‚Äî</b></span></div>
                    </div>
                    <div class="ms" id="secSummary"><h4><i class="fas fa-robot"></i> AI Summary</h4><div class="ai-box"><p id="oSummary"></p></div></div>
                    <div class="ms"><h4><i class="fas fa-comments"></i> Key Topics</h4><ul id="oTopics" class="ml"></ul></div>
                    <div class="ms"><h4><i class="fas fa-gavel"></i> Decisions</h4><ul id="oDecisions" class="ml ml-g"></ul></div>
                    <div class="ms"><h4><i class="fas fa-tasks"></i> Action Items</h4><div class="tw"><table class="mtable"><thead><tr><th>#</th><th>Action</th><th>Owner</th><th>Raised</th><th>ETA</th><th>Priority</th><th>Status</th></tr></thead><tbody id="oActions"></tbody></table></div></div>
                    <div class="ms"><h4><i class="fas fa-user-tag"></i> Speakers</h4><div id="oSpeakers" class="spk-wrap"></div></div>
                    <div class="ms"><h4><i class="fas fa-question-circle"></i> Open Points</h4><ul id="oOpen" class="ml ml-a"></ul></div>
                    <div class="ms ms-summ"><h4><i class="fas fa-clipboard-check"></i> Summary</h4><p id="oStructSum"></p></div>
                    <div class="ms"><h4><i class="fas fa-chart-bar"></i> Tone</h4><div id="oTone" class="tone-wrap"></div></div>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: CARBON ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="module" id="mod-carbon">
            <div class="module-header">
                <h2><i class="fas fa-leaf"></i> Carbon Footprint Report</h2>
                <p>Environmental impact auto-calculated from meeting data</p>
            </div>

            <div class="carbon-empty" id="carbonEmpty">
                <i class="fas fa-seedling"></i>
                <h4>No carbon data yet</h4>
                <p>Generate minutes first ‚Äî carbon is calculated automatically.</p>
                <button class="btn btn-primary" data-goto="input"><i class="fas fa-arrow-left"></i> Go to Input</button>
            </div>

            <div class="carbon-content hidden" id="carbonContent">
                <div class="c-detected" id="cDetected">
                    <div class="c-det-title"><i class="fas fa-search"></i> Extracted Data</div>
                    <div class="c-det-grid">
                        <div class="c-det-item"><small>Platform</small><b id="cPlat">‚Äî</b></div>
                        <div class="c-det-item"><small>Duration</small><b id="cDur">‚Äî</b></div>
                        <div class="c-det-item"><small>Participants</small><b id="cPart">‚Äî</b></div>
                        <div class="c-det-item"><small>Speakers</small><b id="cSpk">‚Äî</b></div>
                        <div class="c-det-item"><small>Pages</small><b id="cPg">‚Äî</b></div>
                        <div class="c-det-item"><small>Words</small><b id="cWd">‚Äî</b></div>
                    </div>
                </div>
                <div class="c-grid">
                    <div class="c-card"><div class="cc-h cc-paper"><i class="fas fa-scroll"></i><h4>Paper Savings</h4></div><div class="cc-b"><div class="cc-row"><div class="cc-i cc1"><i class="fas fa-file"></i></div><div><b id="cPages">0</b><small>Pages</small></div></div><div class="cc-row"><div class="cc-i cc2"><i class="fas fa-tree"></i></div><div><b id="cTrees">0</b><small>Trees</small></div></div><div class="cc-row"><div class="cc-i cc3"><i class="fas fa-cloud"></i></div><div><b id="cPaperCO2">0</b><small>kg CO‚ÇÇ</small></div></div><div class="cc-row"><div class="cc-i cc4"><i class="fas fa-tint"></i></div><div><b id="cWater">0</b><small>L Water</small></div></div></div></div>
                    <div class="c-card"><div class="cc-h cc-travel"><i class="fas fa-car-side"></i><h4>Travel Savings</h4></div><div class="cc-b"><div class="cc-row"><div class="cc-i cc5"><i class="fas fa-road"></i></div><div><b id="cDist">0</b><small>km</small></div></div><div class="cc-row"><div class="cc-i cc6"><i class="fas fa-gas-pump"></i></div><div><b id="cFuel">0</b><small>L Fuel</small></div></div><div class="cc-row"><div class="cc-i cc7"><i class="fas fa-smog"></i></div><div><b id="cTravCO2">0</b><small>kg CO‚ÇÇ</small></div></div></div></div>
                    <div class="c-card"><div class="cc-h cc-digi"><i class="fas fa-bolt"></i><h4>Digital Cost</h4></div><div class="cc-b"><div class="cc-row"><div class="cc-i cc8"><i class="fas fa-plug"></i></div><div><b id="cEnergy">0</b><small>kWh</small></div></div><div class="cc-row"><div class="cc-i cc9"><i class="fas fa-cloud-sun"></i></div><div><b id="cDigiCO2">0</b><small>g CO‚ÇÇ</small></div></div><div class="cc-row"><div class="cc-i cc10"><i class="fas fa-arrow-down"></i></div><div><b id="cNetPct">0%</b><small>Net Save</small></div></div></div></div>

                    <div class="c-card c-total">
                        <div class="cc-h cc-tot"><i class="fas fa-globe-americas"></i><h4>Net Impact</h4></div>
                        <div class="cc-b">
                            <div class="c-tot-flex">
                                <div class="c-donut"><svg viewBox="0 0 200 200"><circle cx="100" cy="100" r="80" class="d-bg"/><circle cx="100" cy="100" r="80" class="d-fill" id="donutFill"/></svg><div class="c-donut-center"><span class="cdc-val" id="cNetVal">0</span><span class="cdc-unit">kg CO‚ÇÇ</span></div></div>
                                <div class="c-breakdown">
                                    <div class="cb-row g"><span class="cb-dot"></span>Paper<b id="ibP">0</b></div>
                                    <div class="cb-row g"><span class="cb-dot"></span>Travel<b id="ibT">0</b></div>
                                    <div class="cb-row r"><span class="cb-dot"></span>Digital<b id="ibD">0</b></div>
                                    <div class="cb-row n"><span class="cb-dot"></span>Net<b id="ibN">0</b></div>
                                </div>
                            </div>
                            <div class="c-equiv">
                                <div class="ce"><i class="fas fa-tree"></i><b id="eqTree">0</b><small>trees¬∑day</small></div>
                                <div class="ce"><i class="fas fa-car"></i><b id="eqCar">0</b><small>km drive</small></div>
                                <div class="ce"><i class="fas fa-lightbulb"></i><b id="eqLed">0</b><small>LED hrs</small></div>
                                <div class="ce"><i class="fas fa-mobile-alt"></i><b id="eqPh">0</b><small>charges</small></div>
                            </div>
                            <div class="c-compare">
                                <div class="cmp-bar"><span class="cmp-lbl">Physical</span><div class="cmp-track"><div class="cmp-fill cmp-phys" id="cmpPhys"></div></div><span class="cmp-val" id="cmpPhysV">0</span></div>
                                <div class="cmp-bar"><span class="cmp-lbl">Digital</span><div class="cmp-track"><div class="cmp-fill cmp-digi" id="cmpDigi"></div></div><span class="cmp-val" id="cmpDigiV">0</span></div>
                            </div>
                            <div class="c-verdict" id="cVerdict"><i class="fas fa-seedling"></i> ‚Äî</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: EXPORT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="module" id="mod-export">
            <div class="module-header">
                <h2><i class="fas fa-download"></i> Export & Share</h2>
                <p>Download meeting minutes and carbon report</p>
            </div>
            <div class="export-grid">
                <div class="export-card" id="expTxt"><div class="ec-icon"><i class="fas fa-file-lines"></i></div><h4>Plain Text (.txt)</h4><p>MOM + Carbon report as text</p><button class="btn btn-primary btn-block"><i class="fas fa-download"></i> Download .txt</button></div>
                <div class="export-card" id="expHtml"><div class="ec-icon"><i class="fas fa-file-code"></i></div><h4>HTML Report (.html)</h4><p>Styled report for browser/email</p><button class="btn btn-primary btn-block"><i class="fas fa-download"></i> Download .html</button></div>
                <div class="export-card" id="expCopy"><div class="ec-icon"><i class="fas fa-copy"></i></div><h4>Copy to Clipboard</h4><p>Paste into email, docs, chat</p><button class="btn btn-primary btn-block"><i class="fas fa-copy"></i> Copy All</button></div>
                <div class="export-card" id="expPrint"><div class="ec-icon"><i class="fas fa-print"></i></div><h4>Print</h4><p>Print-optimized layout</p><button class="btn btn-primary btn-block"><i class="fas fa-print"></i> Print</button></div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: SDG ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="module" id="mod-sdg">
            <div class="module-header">
                <h2><i class="fas fa-globe"></i> SDG Alignment</h2>
                <p>UN Sustainable Development Goals</p>
            </div>
            <div class="sdg-grid">
                <div class="sdg-card" style="--sc:#C5192D"><div class="sdg-head"><span>4</span><i class="fas fa-graduation-cap"></i></div><h4>Quality Education</h4><p>Digitizes meetings into searchable records. Digital transformation in education.</p></div>
                <div class="sdg-card" style="--sc:#FD6925"><div class="sdg-head"><span>9</span><i class="fas fa-industry"></i></div><h4>Industry & Innovation</h4><p>AI-driven NLP for digital workflows. Resilient governance infrastructure.</p></div>
                <div class="sdg-card" style="--sc:#BF8B2E"><div class="sdg-head"><span>12</span><i class="fas fa-recycle"></i></div><h4>Responsible Consumption</h4><p>Eliminates printed documents. Tracks paper savings. Carbon footprint driver.</p></div>
                <div class="sdg-card" style="--sc:#3F7E44"><div class="sdg-head"><span>13</span><i class="fas fa-thermometer-half"></i></div><h4>Climate Action</h4><p>Auto-calculates meeting carbon footprint. Physical vs digital comparison.</p></div>
            </div>
        </section>

    </main>

    <!-- Toast -->
    <div class="toast" id="toast"><i class="fas fa-check-circle" id="tI"></i><span id="tM"></span></div>

    <script src="script.js"></script>
</body>
</html>/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ONE CLICK MOM ‚Äî Modular Dashboard
   Modules: Connector, Parser, AI Engine, MOM Gen, Carbon, Export
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

const App = {
    engine: 'ai',
    apiKey: '',
    source: 'manual',
    momData: null,
    activities: [],

    init() {
        this.apiKey = localStorage.getItem('groq-k') || '';
        Module.Navigation.init();
        Module.Theme.init();
        Module.Connector.init();
        Module.Input.init();
        Module.AIConfig.init();
        Module.Export.init();
        Module.Dashboard.init();
        document.getElementById('mDate').valueAsDate = new Date();
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: Navigation ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const Module = {};

Module.Navigation = {
    init() {
        document.querySelectorAll('.nav-item').forEach(btn => {
            btn.addEventListener('click', () => this.switchTo(btn.dataset.module));
        });
        document.querySelectorAll('[data-goto]').forEach(btn => {
            btn.addEventListener('click', () => this.switchTo(btn.dataset.goto));
        });
        document.getElementById('menuToggle').onclick = () => document.getElementById('sidebar').classList.toggle('open');
        document.getElementById('sidebarCollapse').onclick = () => {
            document.getElementById('sidebar').classList.toggle('collapsed');
        };
        document.getElementById('qaGenerate').onclick = () => {
            this.switchTo('input');
            setTimeout(() => document.getElementById('btnGenerate').click(), 300);
        };
    },
    switchTo(mod) {
        document.querySelectorAll('.module').forEach(m => m.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        const el = document.getElementById('mod-' + mod);
        if (el) el.classList.add('active');
        const nav = document.querySelector(`[data-module="${mod}"]`);
        if (nav) nav.classList.add('active');
        const titles = { dashboard:'Dashboard Overview', connector:'Platform Connector', input:'Transcript Input', 'ai-config':'AI Engine', minutes:'Meeting Minutes', carbon:'Carbon Footprint', export:'Export & Share', sdg:'SDG Alignment' };
        const icons = { dashboard:'fa-th-large', connector:'fa-plug', input:'fa-keyboard', 'ai-config':'fa-brain', minutes:'fa-file-alt', carbon:'fa-leaf', export:'fa-download', sdg:'fa-globe' };
        document.getElementById('topbarTitle').innerHTML = `<i class="fas ${icons[mod]||'fa-circle'}"></i><span>${titles[mod]||mod}</span>`;
        document.getElementById('sidebar').classList.remove('open');
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: Theme ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.Theme = {
    init() {
        const saved = localStorage.getItem('mom-theme') || 'dark';
        this.set(saved);
        document.getElementById('themeToggle').onclick = () => {
            const next = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            this.set(next);
            localStorage.setItem('mom-theme', next);
        };
    },
    set(t) {
        document.documentElement.setAttribute('data-theme', t);
        document.querySelector('#themeToggle i').className = t === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: Connector (Platform Import) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.Connector = {
    init() {
        document.getElementById('btnTeams').onclick = () => this.importFrom('teams', document.getElementById('teamsInput').value);
        document.getElementById('btnZoom').onclick = () => this.importFrom('zoom', document.getElementById('zoomInput').value);
        document.getElementById('btnMeet').onclick = () => this.importFrom('meet', document.getElementById('meetInput').value);
        document.getElementById('btnFile').onclick = () => document.getElementById('fileUpload').click();

        const dz = document.getElementById('dropZone');
        dz.onclick = () => document.getElementById('fileUpload').click();
        dz.addEventListener('dragover', e => { e.preventDefault(); dz.classList.add('dragover'); });
        dz.addEventListener('dragleave', () => dz.classList.remove('dragover'));
        dz.addEventListener('drop', e => { e.preventDefault(); dz.classList.remove('dragover'); if (e.dataTransfer.files.length) this.readFile(e.dataTransfer.files[0]); });

        document.getElementById('fileUpload').onchange = e => { if (e.target.files[0]) this.readFile(e.target.files[0]); e.target.value = ''; };
        document.getElementById('irProceed').onclick = () => Module.Navigation.switchTo('input');
    },

    importFrom(platform, raw) {
        if (!raw?.trim()) return toast(`Paste ${platform} transcript first`, true);
        let text = raw.trim();
        if (text.includes('WEBVTT') || text.match(/\d{2}:\d{2}:\d{2}\.\d{3}/)) text = Module.Parser.parseVTT(text);
        else if (text.match(/\d{2}:\d{2}:\d{2},\d{3}/)) text = Module.Parser.parseSRT(text);
        this.populate(text, platform);
    },

    readFile(file) {
        const ext = file.name.split('.').pop().toLowerCase();
        if (!['txt','vtt','srt'].includes(ext)) return toast('Unsupported file type', true);
        const r = new FileReader();
        r.onload = ev => {
            let t = ev.target.result;
            if (ext === 'vtt') t = Module.Parser.parseVTT(t);
            else if (ext === 'srt') t = Module.Parser.parseSRT(t);
            this.populate(t, 'file');
        };
        r.readAsText(file);
    },

    populate(text, platform) {
        App.source = platform;
        document.getElementById('transcript').value = text;
        document.getElementById('transcript').dispatchEvent(new Event('input'));
        Module.Parser.autoDetect(text);
        const typeMap = { teams:'teams', zoom:'zoom', meet:'meet', file:'virtual' };
        document.getElementById('mPlatform').value = typeMap[platform] || 'virtual';
        this.updateBadges(platform);
        this.showResult(text, platform);
        Module.Dashboard.addActivity(`Imported from ${platform}`, 'ad-b');
        Module.Dashboard.updatePipeline('connect', 'done');
        Module.Dashboard.updatePipeline('input', 'done');
        toast(`Imported from ${platform}! ‚úì`);
    },

    updateBadges(platform) {
        const names = { teams:'Teams', zoom:'Zoom', meet:'Meet', file:'File', manual:'Manual' };
        const icons = { teams:'fab fa-microsoft', zoom:'fas fa-video', meet:'fab fa-google', file:'fas fa-file', manual:'fas fa-keyboard' };
        document.getElementById('connBadge').textContent = names[platform] || '‚Äî';
        document.getElementById('connBadge').className = 'nav-badge';
        const src = document.getElementById('srcBadge');
        src.innerHTML = `<i class="${icons[platform]||icons.manual}"></i> ${names[platform]||'Manual'}`;
        src.className = `src-badge ${platform}`;
    },

    showResult(text, platform) {
        const ir = document.getElementById('importResult');
        const grid = document.getElementById('irGrid');
        ir.classList.remove('hidden');
        const words = text.trim().split(/\s+/).length;
        const spks = new Set(); text.split('\n').forEach(l => { const m = l.match(/^([A-Z][a-zA-Z\s]+?):\s/); if (m) spks.add(m[1].trim()); });
        const items = [
            { l:'Platform', v:{teams:'MS Teams',zoom:'Zoom',meet:'Google Meet',file:'File'}[platform] },
            { l:'Words', v:words.toLocaleString() },
            { l:'Speakers', v:spks.size||'‚Äî' },
            { l:'Est. Duration', v:Math.round(words/150)+'m' }
        ];
        grid.innerHTML = items.map(i => `<div class="ir-item"><small>${i.l}</small><b>${i.v}</b></div>`).join('');
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: Parser ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.Parser = {
    parseVTT(vtt) {
        const lines = vtt.split('\n'), result = [];
        let curSpeaker = '', curText = '';
        for (const line of lines) {
            const l = line.trim();
            if (!l || l === 'WEBVTT' || l.startsWith('NOTE') || l.startsWith('Kind:') || l.startsWith('Language:')) continue;
            if (l.match(/^\d+$/)) continue;
            if (l.match(/\d{2}:\d{2}:\d{2}[\.,]\d{3}\s*-->/)) continue;
            const vm = l.match(/<v\s+([^>]+)>(.+?)(<\/v>)?$/);
            const cm = l.match(/^([A-Z][a-zA-Z\s]+):\s*(.+)/);
            if (vm) {
                const sp = vm[1].trim(), tx = vm[2].replace(/<\/v>/g,'').trim();
                if (sp !== curSpeaker) { if (curText) result.push(`${curSpeaker}: ${curText}`); curSpeaker = sp; curText = tx; }
                else curText += ' ' + tx;
            } else if (cm) {
                if (curText) result.push(`${curSpeaker}: ${curText}`);
                curSpeaker = cm[1].trim(); curText = cm[2].trim();
            } else if (l.length > 2) curText += ' ' + l;
        }
        if (curText) result.push(`${curSpeaker}: ${curText}`);
        return result.join('\n');
    },

    parseSRT(srt) {
        return srt.split(/\n\s*\n/).map(block => {
            const lines = block.trim().split('\n').filter(l => !l.match(/^\d+$/) && !l.match(/\d{2}:\d{2}:\d{2},\d{3}/));
            return lines.join(' ').replace(/<[^>]*>/g,'').trim();
        }).filter(Boolean).join('\n');
    },

    autoDetect(text) {
        if (!text || text.length < 20) return;
        const lo = text.toLowerCase();
        const f = (id) => document.getElementById(id);
        const dm = text.match(/(?:duration|length)\s*[:=]?\s*(\d+)\s*min/i);
        if (dm && !f('mDur').value) f('mDur').value = dm[1];
        if (!f('mDur').value) f('mDur').value = Math.max(15, Math.round(text.trim().split(/\s+/).length / 150));
        const pm = text.match(/(?:attendees|participants)\s*[:=]\s*(.+)/i);
        if (pm && !f('mPart').value) { const n = pm[1].match(/[A-Z][a-z]+/g); if (n?.length > 1) f('mPart').value = n.length; }
        if (!f('mPart').value) { const s = new Set(); text.split('\n').forEach(l => { const m = l.match(/^([A-Z][a-zA-Z]+)\s*:/); if (m) s.add(m[1]); }); if (s.size > 1) f('mPart').value = s.size; }
        const tm = text.match(/(?:meeting|subject|topic|title)\s*[:=]\s*(.+)/i);
        if (tm && !f('mTitle').value) f('mTitle').value = tm[1].trim().substring(0, 80);
        const dtm = text.match(/date\s*[:=]\s*(\d{4}-\d{2}-\d{2})/i);
        if (dtm && !f('mDate').value) f('mDate').value = dtm[1];
        const om = text.match(/(?:organizer|host|chair)\s*[:=]\s*(.+)/i);
        if (om && !f('mOrg').value) f('mOrg').value = om[1].trim().split(/[,(]/)[0].trim();
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: AI Config ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.AIConfig = {
    init() {
        const rcA = document.getElementById('optAI'), rcL = document.getElementById('optLocal'), kb = document.getElementById('aiKeyBox'), ki = document.getElementById('apiKey');
        if (App.apiKey) ki.value = App.apiKey;
        this.updateBadge();

        rcA.querySelector('input').onchange = () => { App.engine = 'ai'; rcA.classList.add('active'); rcL.classList.remove('active'); kb.classList.remove('hidden'); this.updateBadge(); };
        rcL.querySelector('input').onchange = () => { App.engine = 'local'; rcL.classList.add('active'); rcA.classList.remove('active'); kb.classList.add('hidden'); this.updateBadge(); };
        rcA.onclick = e => { if (e.target.tagName !== 'A') rcA.querySelector('input').click(); };
        rcL.onclick = () => rcL.querySelector('input').click();

        document.getElementById('saveApiKey').onclick = async () => {
            App.apiKey = ki.value.trim();
            if (!App.apiKey.startsWith('gsk_')) return toast('Key must start with gsk_', true);
            localStorage.setItem('groq-k', App.apiKey); this.updateBadge();
            const res = document.getElementById('akbResult');
            res.className = 'akb-result'; res.textContent = 'Testing‚Ä¶';
            try {
                const r = await fetch('https://api.groq.com/openai/v1/models', { headers: { Authorization: 'Bearer ' + App.apiKey } });
                res.className = r.ok ? 'akb-result ok' : 'akb-result fail';
                res.textContent = r.ok ? '‚úì Valid!' : '‚úó Invalid';
                if (r.ok) toast('Key saved!');
            } catch { res.className = 'akb-result fail'; res.textContent = '‚úó Error'; }
        };
        document.getElementById('toggleVis').onclick = () => { ki.type = ki.type === 'password' ? 'text' : 'password'; };
    },
    updateBadge() {
        const b = document.getElementById('aiBadge');
        b.textContent = App.engine === 'ai' ? (App.apiKey ? 'AI' : '!') : 'Local';
        b.className = App.engine === 'ai' && App.apiKey ? 'nav-badge ai-badge' : 'nav-badge';
        document.getElementById('eTag').innerHTML = App.engine === 'ai' && App.apiKey
            ? '<i class="fas fa-brain"></i> <b>Groq Llama 3</b>'
            : App.engine === 'ai' ? '<i class="fas fa-exclamation-triangle"></i> Add API key'
            : '<i class="fas fa-microchip"></i> <b>Rule Engine</b>';
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: Input ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.Input = {
    init() {
        const ta = document.getElementById('transcript');
        ta.oninput = () => {
            document.getElementById('charCount').textContent = ta.value.length + 'c';
            document.getElementById('wordCount').textContent = (ta.value.trim() ? ta.value.trim().split(/\s+/).length : 0) + 'w';
        };
        document.getElementById('tbSample').onclick = () => this.loadSample();
        document.getElementById('tbClear').onclick = () => { ta.value = ''; ta.oninput(); App.source = 'manual'; Module.Connector.updateBadges('manual'); };
        document.getElementById('btnGenerate').onclick = () => Module.Generator.run();
    },
    loadSample() {
        const vtt = `WEBVTT\n\n00:00:01.000 --> 00:00:08.000\n<v John Smith>Good morning. Last sprint we completed 85% of stories, up from 72%.</v>\n\n00:00:09.000 --> 00:00:18.000\n<v Sarah Chen>Marketing dashboard ready for review. Q3 budget report needs finalizing by Friday.</v>\n\n00:00:19.000 --> 00:00:28.000\n<v Mike Johnson>I'll set up CI/CD pipeline for microservices by Monday. Docker done. Staging migration needed.</v>\n\n00:00:29.000 --> 00:00:35.000\n<v John Smith>Decision: Approved TechCorp vendor contract. $45,000 annual.</v>\n\n00:00:36.000 --> 00:00:45.000\n<v Lisa Park>Found 3 critical bugs in payment module. Stripe integration and invoice generation. Urgent before v2.3.</v>\n\n00:00:46.000 --> 00:00:55.000\n<v Raj Kumar>I'll fix the auth bug by Wednesday. Also need DB query optimization for API response times.</v>\n\n00:00:56.000 --> 00:01:00.000\n<v John Smith>Decision: Mobile redesign postponed to Q4.</v>\n\n00:01:01.000 --> 00:01:08.000\n<v Priya Sharma>React components tested. Design system docs and Storybook updated.</v>\n\n00:01:09.000 --> 00:01:12.000\n<v John Smith>Action: Mike to set up CI/CD by Monday Jan 20.</v>\n\n00:01:13.000 --> 00:01:16.000\n<v John Smith>Action: Sarah to finalize budget by Friday Jan 17.</v>\n\n00:01:17.000 --> 00:01:20.000\n<v John Smith>Action: Raj to fix auth bug, critical, by Wednesday.</v>\n\n00:01:21.000 --> 00:01:24.000\n<v John Smith>Action: Priya to share design docs by Thursday.</v>\n\n00:01:25.000 --> 00:01:28.000\n<v John Smith>Action: Lisa regression testing for v2.3 by Tuesday.</v>\n\n00:01:29.000 --> 00:01:33.000\n<v Lisa Park>Question: Security audit timeline?</v>\n\n00:01:34.000 --> 00:01:37.000\n<v Raj Kumar>Question: Upgrade to Node.js 20 LTS this sprint?</v>\n\n00:01:38.000 --> 00:01:42.000\n<v Alex Wong>Onboarding wireframes done. Sharing in Figma by EOD.</v>\n\n00:01:43.000 --> 00:01:48.000\n<v John Smith>Decision: Standup moved to 10 AM next week. Update JIRA daily.</v>`;
        Module.Connector.populate(Module.Parser.parseVTT(vtt), 'teams');
        document.getElementById('mTitle').value = 'Sprint Planning ‚Äî Q3 W12';
        document.getElementById('mDate').value = '2025-01-15';
        document.getElementById('mOrg').value = 'John Smith';
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: Generator (AI + Rules) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.Generator = {
    async run() {
        const text = document.getElementById('transcript').value.trim();
        if (!text) return toast('Enter transcript first', true);
        const lbl = document.getElementById('genLabel'), ld = document.getElementById('genLoader'), msg = document.getElementById('genMsg'), btn = document.getElementById('btnGenerate');
        lbl.classList.add('hidden'); ld.classList.remove('hidden'); btn.disabled = true;
        Module.Dashboard.updatePipeline('ai', 'active');

        let result;
        try {
            if (App.engine === 'ai' && App.apiKey) { msg.textContent = 'AI analyzing‚Ä¶'; result = await this.callGroq(text); }
            else { msg.textContent = 'Rule engine‚Ä¶'; await delay(500); result = this.ruleEngine(text); }
        } catch (err) {
            console.error(err); toast('AI error ‚Äî fallback', true);
            try { result = this.ruleEngine(text); } catch { lbl.classList.remove('hidden'); ld.classList.add('hidden'); btn.disabled = false; return toast('Failed', true); }
        }

        App.momData = result;
        Module.MOMRenderer.render(result);
        Module.Carbon.calculate(text, result);
        Module.Dashboard.updatePipeline('ai', 'done');
        Module.Dashboard.updatePipeline('mom', 'done');
        Module.Dashboard.updatePipeline('carbon', 'done');
        Module.Dashboard.addActivity('Minutes generated', 'ad-g');
        Module.Dashboard.bumpStats(result.actionItems?.length || 0);
        Module.Navigation.switchTo('minutes');
        toast('Minutes + Carbon ready! üéâ');
        lbl.classList.remove('hidden'); ld.classList.add('hidden'); btn.disabled = false;
    },

    async callGroq(text) {
        const meta = getMeta(); let model = 'llama-3.1-8b-instant';
        try { const r = await fetch('https://api.groq.com/openai/v1/models', { headers: { Authorization: 'Bearer ' + App.apiKey } }); if (r.ok) { const d = await r.json(); for (const p of ['llama-3.3-70b-versatile','llama-3.1-70b-versatile','llama3-70b-8192','llama-3.1-8b-instant','gemma2-9b-it','mixtral-8x7b-32768']) { if (d.data.some(m => m.id === p)) { model = p; break; } } } } catch {}

        const res = await fetch('https://api.groq.com/openai/v1/chat/completions', {
            method:'POST', headers:{ Authorization:'Bearer '+App.apiKey, 'Content-Type':'application/json' },
            body: JSON.stringify({ model, messages:[
                { role:'system', content:'Meeting minutes generator. Return ONLY JSON:{"aiSummary":"3-5 sentences","discussions":["3-8 topic summaries NOT raw quotes"],"decisions":["decision"],"actionItems":[{"task":"desc","owner":"Name","eta":"date","priority":"High/Medium/Low"}],"speakers":["Name"],"openPoints":["question"],"structuredSummary":"paragraph","tone":{"productive":75,"collaborative":70,"urgent":40,"positive":80}}' },
                { role:'user', content:`Title:${meta.title}\nDate:${meta.date}\n\n${text}` }
            ], temperature:0.2, max_tokens:4096 })
        });
        if (!res.ok) throw new Error((await res.json().catch(()=>({}))).error?.message || res.status);
        let raw = (await res.json()).choices[0].message.content.replace(/```json\s*/gi,'').replace(/```/g,'').trim();
        let p; try { p = JSON.parse(raw); } catch { const m = raw.match(/\{[\s\S]*\}/); if (m) p = JSON.parse(m[0]); else throw new Error('Bad JSON'); }
        return this.normalize(p, meta, 'ai');
    },

    normalize(p, m, eng) {
        return { aiSummary:p.aiSummary||'', discussions:(p.discussions||[]).map(d=>typeof d==='string'?d:d.content||JSON.stringify(d)), decisions:p.decisions||[], actionItems:(p.actionItems||p.action_items||[]).map(a=>({task:a.task||a.description||'',owner:a.owner||'Unassigned',dateRaised:m.date,eta:a.eta||a.deadline||'TBD',priority:a.priority||'Medium'})), speakers:p.speakers||[], openPoints:p.openPoints||p.open_points||[], structuredSummary:p.structuredSummary||'', tone:p.tone||{productive:65,collaborative:60,urgent:35,positive:70}, engine:eng };
    },

    ruleEngine(text) {
        const lines = text.split('\n').map(l=>l.trim()).filter(l=>l), meta = getMeta();
        const R = {aiSummary:'',discussions:[],decisions:[],actionItems:[],speakers:new Set(),openPoints:[],structuredSummary:'',tone:{productive:0,collaborative:0,urgent:0,positive:0},engine:'local'};
        const decRx=[/^decision\s*[:.\-]\s*/i,/^decided\s*[:.\-]\s*/i,/^approved\s*[:.\-]\s*/i,/^agreed\s*[:.\-]\s*/i];
        const actRx=[/^action\s*(item)?\s*[:.\-]\s*/i,/^todo\s*[:.\-]\s*/i,/^task\s*[:.\-]\s*/i];
        const qRx=[/^question\s*[:.\-]\s*/i,/^open\s*[:.\-]\s*/i,/^pending\s*[:.\-]\s*/i];
        const spkRx=/^([A-Z][a-zA-Z\s]+?)\s*:\s*(.+)/;
        const metaRx=/^(meeting|date|time|attendees|participants|duration|platform|organizer)\s*:/i;

        const tw={productive:['completed','done','finished','progress','ready','fixed','resolved'],collaborative:['we','team','together','agreed','everyone','our'],urgent:['urgent','critical','immediate','asap','blocker','deadline'],positive:['great','good','excellent','solid','positive','success','ready']};
        const lo=text.toLowerCase();
        for(const[k,ws]of Object.entries(tw)){let c=0;ws.forEach(w=>{const m=lo.match(new RegExp('\\b'+w+'\\b','gi'));if(m)c+=m.length});R.tone[k]=Math.min(100,Math.round(c/Math.max(lines.length,1)*500))}

        const rawD=[];
        for(const line of lines){
            if(metaRx.test(line)){if(/^(attendees|participants)\s*:/i.test(line)){(line.replace(/^(attendees|participants)\s*:\s*/i,'').match(/[A-Z][a-z]+/g)||[]).forEach(n=>R.speakers.add(n))}continue}
            let d=false;
            for(const rx of decRx){if(rx.test(line)){R.decisions.push(line.replace(rx,'').trim());d=true;break}}if(d)continue;
            for(const rx of actRx){if(rx.test(line)){R.actionItems.push(mkAction(line.replace(rx,'').trim(),meta.date));d=true;break}}if(d)continue;
            for(const rx of qRx){if(rx.test(line)){R.openPoints.push(line.replace(rx,'').trim());d=true;break}}if(d)continue;
            if(line.endsWith('?')){R.openPoints.push(line.replace(spkRx,'$2').trim());const sm=line.match(spkRx);if(sm)R.speakers.add(sm[1].trim());continue}
            const sm=line.match(spkRx);
            if(sm){R.speakers.add(sm[1].trim());const c=sm[2].trim();
                if(/\b(decided|approved|agreed|decision)\b/i.test(c))R.decisions.push(c);
                else if(/\b(I'll|I will|will .+ by)\b/i.test(c))R.actionItems.push(mkAction(c,meta.date,sm[1].trim()));
                else if(c.length>10)rawD.push(c);continue}
            if(/^note\s*[:.\-]/i.test(line)){rawD.push(line.replace(/^note\s*[:.\-]\s*/i,''));continue}
            if(line.length>15&&!/^[#=\-]/.test(line))rawD.push(line);
        }
        R.discussions=condense(rawD);R.speakers=[...R.speakers];
        R.structuredSummary=[R.discussions.length&&`${R.discussions.length} topics`,R.decisions.length&&`${R.decisions.length} decisions`,R.actionItems.length&&`${R.actionItems.length} actions`,R.openPoints.length&&`${R.openPoints.length} open`].filter(Boolean).join(', ')+'.';
        R.aiSummary=`Meeting: ${R.discussions.length} topics, ${R.speakers.length} contributors, ${R.decisions.length} decisions, ${R.actionItems.length} actions. ${R.openPoints.length?R.openPoints.length+' open.':'All addressed.'}`;
        return R;
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: MOM Renderer ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.MOMRenderer = {
    render(d) {
        const m = getMeta();
        document.getElementById('momEmpty').classList.add('hidden');
        document.getElementById('momContent').classList.remove('hidden');
        const $ = id => document.getElementById(id);
        $('oTitle').textContent = m.title; $('oDate').textContent = m.date; $('oDur').textContent = m.dur+' min'; $('oPart').textContent = m.part+' ppl'; $('oPlat').textContent = m.type; $('oOrg').textContent = m.organizer;
        $('oBadge').textContent = d.engine==='ai'?'AI':'RULES';
        const srcN={teams:'TEAMS',zoom:'ZOOM',meet:'MEET',file:'FILE',manual:'MANUAL'};
        $('oSrc').textContent = srcN[App.source]||'MANUAL';
        if(d.aiSummary){$('secSummary').classList.remove('hidden');$('oSummary').textContent=d.aiSummary}else $('secSummary').classList.add('hidden');
        fillUL('oTopics',d.discussions); fillUL('oDecisions',d.decisions); fillUL('oOpen',d.openPoints);
        const tb=$('oActions');tb.innerHTML='';
        if(!d.actionItems.length)tb.innerHTML='<tr><td colspan="7" style="text-align:center;color:var(--t3)">‚Äî</td></tr>';
        else d.actionItems.forEach((a,i)=>{const cls=(a.priority||'Medium').toLowerCase()==='high'?'pt-h':(a.priority||'').toLowerCase()==='low'?'pt-l':'pt-m';const tr=document.createElement('tr');tr.innerHTML=`<td>${i+1}</td><td>${esc(a.task)}</td><td><b>${esc(a.owner)}</b></td><td>${esc(a.dateRaised)}</td><td>${esc(a.eta)}</td><td><span class="ptag ${cls}">${esc(a.priority)}</span></td><td><span class="stag">Open</span></td>`;tb.appendChild(tr)});
        const sg=$('oSpeakers');sg.innerHTML='';
        const cols=['#6366f1','#10b981','#f59e0b','#ef4444','#8b5cf6','#ec4899','#06b6d4','#f97316'];
        (d.speakers||[]).forEach((s,i)=>{const n=typeof s==='string'?s:String(s);sg.innerHTML+=`<div class="spk-chip"><div class="spk-av" style="background:${cols[i%cols.length]}">${n[0]}</div><span>${esc(n)}</span></div>`});
        if(!d.speakers?.length)sg.innerHTML='<span style="color:var(--t3)">‚Äî</span>';
        $('oStructSum').textContent=d.structuredSummary||'';
        const tw=$('oTone');tw.innerHTML='';
        const tc={productive:'#10b981',collaborative:'#6366f1',urgent:'#ef4444',positive:'#f59e0b'};
        if(d.tone)for(const[k,v]of Object.entries(d.tone)){const val=typeof v==='number'?v:50;tw.innerHTML+=`<div class="tone-bar"><span class="tone-lbl">${k[0].toUpperCase()+k.slice(1)}</span><div class="tone-track"><div class="tone-fill" style="width:${val}%;background:${tc[k]}"></div></div><span class="tone-val">${val}%</span></div>`}
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: Carbon Calculator ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.Carbon = {
    calculate(text, mom) {
        document.getElementById('carbonEmpty').classList.add('hidden');
        document.getElementById('carbonContent').classList.remove('hidden');
        const meta = getMeta(), words = text.trim().split(/\s+/).length;
        const dur = parseInt(meta.dur)||Math.max(15,Math.round(words/150));
        const part = parseInt(meta.part)||mom.speakers?.length||5;
        const ppp = Math.ceil(words/250);
        const isVirtual = !['physical'].includes(document.getElementById('mPlatform').value);

        const $=id=>document.getElementById(id);
        $('cPlat').textContent=meta.type; $('cDur').textContent=dur+'m'; $('cPart').textContent=part; $('cSpk').textContent=mom.speakers?.length||0; $('cPg').textContent=ppp+'/p'; $('cWd').textContent=words.toLocaleString();

        const tp=part*ppp, pCO2=tp*.005, trees=tp/8333, water=tp*10;
        anim('cPages',tp); anim('cTrees',trees.toFixed(3),1); anim('cPaperCO2',pCO2.toFixed(2),1); anim('cWater',Math.round(water));

        const km=isVirtual?part*10*2:0, tCO2=km*.12, fuel=km/12;
        anim('cDist',km); anim('cFuel',fuel.toFixed(1),1); anim('cTravCO2',tCO2.toFixed(2),1);

        const hrs=dur/60, dE=.015*part*hrs, dCO2g=dE*500;
        const physG=(pCO2+tCO2)*1000, netPct=physG>0?(((physG-dCO2g)/physG)*100).toFixed(0):95;
        anim('cEnergy',dE.toFixed(4),1); anim('cDigiCO2',dCO2g.toFixed(1),1); $('cNetPct').textContent=netPct+'%';

        const netKg=pCO2+tCO2-dCO2g/1000;
        anim('cNetVal',netKg.toFixed(2),1);
        $('donutFill').style.strokeDashoffset=502-502*Math.min(Math.max(netKg/Math.max(pCO2+tCO2,1),0),1);
        $('ibP').textContent=pCO2.toFixed(2)+' kg'; $('ibT').textContent=tCO2.toFixed(2)+' kg'; $('ibD').textContent='‚àí'+dCO2g.toFixed(1)+' g'; $('ibN').textContent=netKg.toFixed(2)+' kg';
        $('eqTree').textContent=Math.round(netKg/.06); $('eqCar').textContent=Math.round(netKg/.12); $('eqLed').textContent=Math.round(netKg*1000/5); $('eqPh').textContent=Math.round(netKg/.008);

        const physKg=pCO2+tCO2, digKg=dCO2g/1000, maxB=Math.max(physKg,digKg,.01);
        $('cmpPhys').style.width=Math.max(physKg/maxB*100,3)+'%'; $('cmpDigi').style.width=Math.max(digKg/maxB*100,3)+'%';
        $('cmpPhysV').textContent=physKg.toFixed(2)+' kg'; $('cmpDigiV').textContent=dCO2g.toFixed(1)+' g';
        const ratio=physKg>0?Math.round(physKg/Math.max(digKg,.001)):0;
        $('cVerdict').innerHTML=ratio>1?`<i class="fas fa-check-circle"></i> Digital is <b>${ratio}√ó cleaner</b> ‚Äî saved <b>${netKg.toFixed(2)} kg CO‚ÇÇ</b>`:`<i class="fas fa-info-circle"></i> Net: <b>${netKg.toFixed(3)} kg CO‚ÇÇ</b> saved`;
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: Export ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.Export = {
    init() {
        document.getElementById('expTxt').querySelector('button').onclick = () => this.downloadTxt();
        document.getElementById('expHtml').querySelector('button').onclick = () => this.downloadHtml();
        document.getElementById('expCopy').querySelector('button').onclick = () => {
            const t = document.getElementById('momDoc')?.innerText || '';
            navigator.clipboard.writeText(t).then(()=>toast('Copied!')).catch(()=>toast('Failed',true));
        };
        document.getElementById('expPrint').querySelector('button').onclick = () => window.print();
        document.getElementById('copyMom')?.addEventListener('click', () => {
            navigator.clipboard.writeText(document.getElementById('momDoc').innerText).then(()=>toast('Copied!'));
        });
        document.getElementById('printMom')?.addEventListener('click', () => window.print());
    },
    downloadTxt() {
        if (!App.momData) return toast('Generate minutes first', true);
        let t = '‚ïê'.repeat(50)+'\n  MINUTES OF THE MEETING\n'+'‚ïê'.repeat(50)+'\n\n';
        t += `Title: ${q('oTitle')}\nDate: ${q('oDate')}\nDuration: ${q('oDur')}\nParticipants: ${q('oPart')}\n\n`;
        t += '‚îÄ‚îÄ Topics ‚îÄ‚îÄ\n'; document.querySelectorAll('#oTopics li').forEach((l,i)=>t+=`  ${i+1}. ${l.textContent}\n`);
        t += '\n‚îÄ‚îÄ Decisions ‚îÄ‚îÄ\n'; document.querySelectorAll('#oDecisions li').forEach((l,i)=>t+=`  ${i+1}. ${l.textContent}\n`);
        t += '\n‚îÄ‚îÄ Actions ‚îÄ‚îÄ\n'; document.querySelectorAll('#oActions tr').forEach(r=>{const c=r.querySelectorAll('td');if(c.length>=6)t+=`  #${c[0].textContent}|${c[1].textContent}|${c[2].textContent}|${c[4].textContent}|${c[5].textContent}\n`});
        t += '\n‚îÄ‚îÄ Carbon ‚îÄ‚îÄ\nNet: '+q('cNetVal')+' kg CO‚ÇÇ saved\n';
        dlFile(t, `MOM_${q('oDate')}.txt`, 'text/plain'); toast('Downloaded!');
    },
    downloadHtml() {
        if (!App.momData) return toast('Generate first', true);
        const h = `<!DOCTYPE html><html><head><meta charset="UTF-8"><title>MOM</title><style>body{font-family:sans-serif;max-width:900px;margin:2rem auto;padding:1rem;background:#fff;color:#1e293b}.ms{border:1px solid #e2e8f0;border-radius:12px;padding:1.5rem;margin:1rem 0}.ms-head{background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;border:0}.ml{list-style:none;padding:0}.ml li{padding:.5rem;background:#f8fafc;border-left:3px solid #6366f1;margin:.3rem 0;border-radius:4px}.ml-g li{border-left-color:#10b981}.mtable{width:100%;border-collapse:collapse}.mtable th,.mtable td{padding:.5rem;border:1px solid #e2e8f0}.mtable thead{background:#f1f5f9}</style></head><body>${document.getElementById('momDoc').outerHTML}</body></html>`;
        dlFile(h, `MOM_${q('oDate')}.html`, 'text/html'); toast('Downloaded HTML!');
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODULE: Dashboard ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Module.Dashboard = {
    init() {
        const s = JSON.parse(localStorage.getItem('mom-stats')||'{"m":0,"p":0,"c":0,"a":0}');
        document.getElementById('dsMeetings').textContent = s.m;
        document.getElementById('dsPages').textContent = s.p;
        document.getElementById('dsCO2').textContent = s.c.toFixed(1);
        document.getElementById('dsActions').textContent = s.a;
    },
    bumpStats(actions) {
        const part = parseInt(document.getElementById('mPart').value)||10;
        const words = (document.getElementById('transcript').value.trim().split(/\s+/).length)||100;
        const pages = part * Math.ceil(words/250);
        const s = JSON.parse(localStorage.getItem('mom-stats')||'{"m":0,"p":0,"c":0,"a":0}');
        s.m++; s.p += pages; s.c = +(s.p*.005).toFixed(2); s.a += actions;
        localStorage.setItem('mom-stats', JSON.stringify(s));
        document.getElementById('dsMeetings').textContent = s.m;
        document.getElementById('dsPages').textContent = s.p;
        document.getElementById('dsCO2').textContent = s.c.toFixed(1);
        document.getElementById('dsActions').textContent = s.a;
    },
    updatePipeline(step, state) {
        const map = {connect:'pvConnect',input:'pvInput',ai:'pvAI',mom:'pvMOM',carbon:'pvCarbon'};
        const el = document.getElementById(map[step]);
        if (el) { el.className = 'pv-step ' + state; }
        // Top bar pipeline
        const pipeMap = {connect:0,input:1,ai:2,mom:3,carbon:4};
        const pipeSteps = document.querySelectorAll('.pipe-step');
        const idx = pipeMap[step];
        if (idx !== undefined && pipeSteps[idx]) pipeSteps[idx].className = 'pipe-step ' + state;
        // Status text
        const statusMap = {connect:'pvConnectStatus',input:'pvInputStatus',ai:'pvAIStatus',mom:'pvMOMStatus',carbon:'pvCarbonStatus'};
        const stEl = document.getElementById(statusMap[step]);
        if (stEl) stEl.textContent = state === 'done' ? '‚úì Done' : state === 'active' ? 'Processing‚Ä¶' : 'Waiting';
    },
    addActivity(text, dotClass) {
        const list = document.getElementById('activityList');
        const empty = list.querySelector('.activity-empty');
        if (empty) empty.remove();
        const time = new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
        list.insertAdjacentHTML('afterbegin', `<div class="act-item"><div class="act-dot ${dotClass||'ad-b'}"></div><span>${text}</span><small>${time}</small></div>`);
        if (list.children.length > 8) list.lastChild.remove();
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê UTILITIES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function getMeta() { const s=document.getElementById('mPlatform'); return{title:document.getElementById('mTitle').value||'Untitled',date:document.getElementById('mDate').value||new Date().toISOString().split('T')[0],dur:document.getElementById('mDur').value||'‚Äî',part:document.getElementById('mPart').value||'‚Äî',type:s.options[s.selectedIndex].text,organizer:document.getElementById('mOrg').value||'‚Äî'}; }
function mkAction(text,date,implied){const ow=text.match(/\b([A-Z][a-z]+)\b\s+(?:to|will|should|must)/);const eta=text.match(/\b(?:by|before|until)\s+((?:Mon|Tue|Wed|Thu|Fri|Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\w*[\s\d,]*\d*)/i);const lo=text.toLowerCase();let pr='Medium';if(['urgent','critical','immediate','asap','blocker'].some(w=>lo.includes(w)))pr='High';else if(['low priority','optional'].some(w=>lo.includes(w)))pr='Low';return{task:text,owner:ow?ow[1]:(implied||'Unassigned'),dateRaised:date,eta:eta?eta[1].trim():'TBD',priority:pr}}
function condense(raw){if(raw.length<=3)return raw.map(l=>trn(l,120));const topics={'Sprint/Progress':['sprint','velocity','stories','completed','progress'],'Budget/Finance':['budget','cost','vendor','contract'],'Infrastructure':['ci/cd','pipeline','deploy','docker','cloud','staging'],'Bugs/QA':['bug','critical','regression','testing','qa','fix'],'Frontend/Design':['react','frontend','design','component','wireframe','figma'],'Backend/API':['api','backend','database','authentication'],'Marketing':['marketing','dashboard','client','demo'],'Scheduling':['schedule','standup','planning','next week']};const bkt={},used=new Set();raw.forEach((l,i)=>{const lo=l.toLowerCase();let best=null,sc=0;for(const[t,kws]of Object.entries(topics)){let s=0;kws.forEach(k=>{if(lo.includes(k))s++});if(s>sc){sc=s;best=t}}if(best&&sc>0){if(!bkt[best])bkt[best]=[];bkt[best].push(l);used.add(i)}});const out=[];for(const[t,ls]of Object.entries(bkt)){out.push(ls.length===1?trn(ls[0],120):`${t}: ${ls.map(l=>trn(l,55)).slice(0,3).join('; ')}`)}const un=raw.filter((_,i)=>!used.has(i));if(un.length)out.push(un.length===1?trn(un[0],120):'Other: '+un.map(l=>trn(l,50)).slice(0,3).join('; '));return out.slice(0,8)}
function trn(t,n){if(t.length<=n)return t;const c=t.substring(0,n),s=c.lastIndexOf(' ');return(s>n*.4?c.substring(0,s):c)+'‚Ä¶'}
function fillUL(id,arr){const ul=document.getElementById(id);ul.innerHTML='';if(!arr?.length){ul.innerHTML='<li>‚Äî</li>';return}arr.forEach(x=>{const li=document.createElement('li');li.innerHTML=esc(typeof x==='string'?x:JSON.stringify(x));ul.appendChild(li)})}
function esc(s){const d=document.createElement('div');d.textContent=s||'';return d.innerHTML}
function q(id){return document.getElementById(id)?.textContent||''}
function delay(ms){return new Promise(r=>setTimeout(r,ms))}
function dlFile(c,n,t){const b=new Blob([c],{type:t}),u=URL.createObjectURL(b),a=document.createElement('a');a.href=u;a.download=n;a.click();URL.revokeObjectURL(u)}
function anim(id,tgt,dec){const el=document.getElementById(id);if(!el)return;const n=parseFloat(tgt);let c=0;const steps=25,inc=n/steps;let s=0;const t=setInterval(()=>{s++;c+=inc;if(s>=steps){c=n;clearInterval(t)}el.textContent=dec?c.toFixed(c<1?4:2):Math.round(c)},16)}
function toast(m,e){const t=document.getElementById('toast');document.getElementById('tM').textContent=m;document.getElementById('tI').className=e?'fas fa-exclamation-circle':'fas fa-check-circle';t.className='toast show'+(e?' err':'');setTimeout(()=>t.classList.remove('show'),3000)}

document.addEventListener('DOMContentLoaded', () => App.init());/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BASE & VARIABLES
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
:root {
    --p:#6366f1;--ph:#4f46e5;--pl:#818cf8;--pbg:rgba(99,102,241,.07);
    --g:#10b981;--gh:#059669;--gbg:rgba(16,185,129,.07);
    --a:#f59e0b;--r:#ef4444;--v:#8b5cf6;--cy:#06b6d4;--pk:#ec4899;
    --teams:#5b5fc7;--zoom:#2d8cff;--gmeet:#ea4335;
    --bg0:#030712;--bg1:#0f172a;--bg2:#1e293b;--bg3:#334155;
    --card:#1e293b;--input:#0f172a;
    --t0:#f8fafc;--t1:#e2e8f0;--t2:#94a3b8;--t3:#64748b;
    --bd:#334155;--bdl:#475569;
    --sidebar-w:260px;--sidebar-cw:68px;--topbar-h:56px;
    --r1:14px;--r2:10px;--r3:6px;--rf:9999px;
    --s1:0 1px 4px rgba(0,0,0,.15);--s2:0 8px 25px rgba(0,0,0,.25);
    --tr:all .25s cubic-bezier(.4,0,.2,1);
    --f:'Inter',-apple-system,sans-serif;
}
[data-theme="light"] {
    --bg0:#f8fafc;--bg1:#fff;--bg2:#f1f5f9;--bg3:#e2e8f0;
    --card:#fff;--input:#f8fafc;
    --t0:#0f172a;--t1:#1e293b;--t2:#475569;--t3:#94a3b8;
    --bd:#e2e8f0;--bdl:#cbd5e1;
    --s1:0 1px 4px rgba(0,0,0,.04);--s2:0 8px 25px rgba(0,0,0,.06);
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:var(--f);background:var(--bg0);color:var(--t0);line-height:1.6;overflow-x:hidden}
a{color:var(--pl);text-decoration:none}
.hidden{display:none!important}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SIDEBAR
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.sidebar {
    position:fixed;top:0;left:0;bottom:0;width:var(--sidebar-w);
    background:var(--bg1);border-right:1px solid var(--bd);
    display:flex;flex-direction:column;z-index:100;transition:var(--tr);
    overflow-y:auto;overflow-x:hidden;
}
.sidebar.collapsed{width:var(--sidebar-cw)}
.sidebar.collapsed .sb-text,
.sidebar.collapsed .nav-item span,
.sidebar.collapsed .nav-badge,
.sidebar.collapsed .nav-section-label{display:none}
.sidebar.collapsed .nav-item{justify-content:center;padding:.6rem}

.sidebar-brand{display:flex;align-items:center;gap:.7rem;padding:1rem 1.1rem;border-bottom:1px solid var(--bd);min-height:var(--topbar-h)}
.sb-icon{width:36px;height:36px;border-radius:var(--r3);background:linear-gradient(135deg,var(--p),var(--v));display:flex;align-items:center;justify-content:center;color:#fff;font-size:1rem;flex-shrink:0}
.sb-name{font-weight:700;font-size:.95rem;display:block}.sb-version{font-size:.6rem;color:var(--t3);display:block}

.sidebar-nav{flex:1;padding:.6rem .5rem}
.nav-section-label{font-size:.62rem;font-weight:600;color:var(--t3);text-transform:uppercase;letter-spacing:.8px;padding:.8rem .7rem .3rem;margin-top:.3rem}
.nav-item{width:100%;display:flex;align-items:center;gap:.6rem;padding:.55rem .75rem;border:none;background:none;color:var(--t2);font-family:var(--f);font-size:.84rem;font-weight:500;border-radius:var(--r3);cursor:pointer;transition:var(--tr);text-align:left;position:relative}
.nav-item:hover{background:var(--bg2);color:var(--t0)}
.nav-item.active{background:var(--pbg);color:var(--p);font-weight:600}
.nav-item.active::before{content:'';position:absolute;left:0;top:20%;bottom:20%;width:3px;background:var(--p);border-radius:0 3px 3px 0}
.nav-item i{width:18px;text-align:center;font-size:.82rem;flex-shrink:0}
.nav-item span{flex:1;white-space:nowrap}
.nav-badge{padding:.1rem .4rem;border-radius:var(--rf);font-size:.6rem;font-weight:600;background:var(--bg3);color:var(--t3)}
.nav-badge.ai-badge{background:var(--gbg);color:var(--g)}

.sidebar-footer{padding:.6rem;border-top:1px solid var(--bd);display:flex;gap:.4rem;justify-content:center}
.sf-btn{width:34px;height:34px;border-radius:var(--r3);background:var(--bg2);border:1px solid var(--bd);color:var(--t2);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:.85rem;transition:var(--tr)}
.sf-btn:hover{background:var(--p);color:#fff}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MAIN & TOPBAR
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.main{margin-left:var(--sidebar-w);min-height:100vh;transition:var(--tr)}
.sidebar.collapsed ~ .main{margin-left:var(--sidebar-cw)}

.topbar{position:sticky;top:0;height:var(--topbar-h);background:rgba(3,7,18,.8);backdrop-filter:blur(16px);border-bottom:1px solid var(--bd);display:flex;align-items:center;padding:0 1.2rem;gap:1rem;z-index:50}
[data-theme="light"] .topbar{background:rgba(255,255,255,.85)}
.topbar-menu{display:none;background:none;border:none;color:var(--t1);font-size:1.2rem;cursor:pointer}
.topbar-title{display:flex;align-items:center;gap:.5rem;font-weight:600;font-size:.95rem}.topbar-title i{color:var(--p);font-size:.85rem}
.topbar-right{margin-left:auto;display:flex;align-items:center;gap:1rem}
.topbar-status{display:flex;align-items:center;gap:.3rem;padding:.2rem .6rem;border-radius:var(--rf);background:var(--gbg);border:1px solid rgba(16,185,129,.15);font-size:.7rem;color:var(--g);font-weight:500}
.status-dot{width:5px;height:5px;border-radius:50%;background:var(--g);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}

.topbar-pipeline{display:flex;align-items:center;gap:0}
.pipe-step{width:28px;height:28px;border-radius:50%;background:var(--bg2);border:2px solid var(--bd);display:flex;align-items:center;justify-content:center;font-size:.65rem;color:var(--t3);transition:var(--tr);position:relative}
.pipe-step.done{background:var(--gbg);border-color:var(--g);color:var(--g)}
.pipe-step.active{background:var(--pbg);border-color:var(--p);color:var(--p);animation:pulse 1.5s infinite}
.pipe-line{width:16px;height:2px;background:var(--bd)}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MODULES (Panels)
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.module{display:none;padding:1.5rem;animation:fadeIn .3s ease}
.module.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.module-header{margin-bottom:1.8rem}
.module-header h2{font-size:1.5rem;font-weight:700;display:flex;align-items:center;gap:.5rem;margin-bottom:.3rem}
.module-header h2 i{color:var(--p);font-size:1.2rem}
.module-header p{color:var(--t2);font-size:.88rem}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DASHBOARD MODULE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.dash-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:1.5rem}
.dash-stat{background:var(--card);border:1px solid var(--bd);border-radius:var(--r1);padding:1.1rem;display:flex;align-items:center;gap:1rem;transition:var(--tr)}
.dash-stat:hover{border-color:var(--p);box-shadow:var(--s2)}
.ds-icon{width:44px;height:44px;border-radius:var(--r2);display:flex;align-items:center;justify-content:center;font-size:1.1rem;flex-shrink:0}
.ds-blue{background:var(--pbg);color:var(--p)}.ds-green{background:rgba(16,185,129,.08);color:var(--g)}.ds-emerald{background:rgba(16,185,129,.12);color:var(--gh)}.ds-amber{background:rgba(245,158,11,.08);color:var(--a)}
.ds-val{display:block;font-size:1.5rem;font-weight:700}.ds-label{font-size:.72rem;color:var(--t3);text-transform:uppercase;letter-spacing:.3px}

.dash-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:1rem}
.dash-card{background:var(--card);border:1px solid var(--bd);border-radius:var(--r1);overflow:hidden;transition:var(--tr)}
.dash-card:hover{border-color:var(--p)}
.dc-wide{grid-column:1/-1}
.dc-head{padding:.8rem 1.1rem;border-bottom:1px solid var(--bd);display:flex;align-items:center;gap:.5rem;font-size:.88rem}
.dc-head i{color:var(--p);font-size:.85rem}.dc-head h4{font-weight:600;font-size:.88rem}

/* Pipeline Visual */
.pipeline-visual{display:flex;align-items:center;justify-content:center;gap:.3rem;padding:1.5rem 1rem;flex-wrap:wrap}
.pv-step{text-align:center;min-width:70px}
.pv-circle{width:44px;height:44px;border-radius:50%;background:var(--bg2);border:2px solid var(--bd);display:flex;align-items:center;justify-content:center;margin:0 auto .4rem;font-size:1rem;color:var(--t3);transition:var(--tr)}
.pv-step.done .pv-circle{background:var(--gbg);border-color:var(--g);color:var(--g)}
.pv-step.active .pv-circle{background:var(--pbg);border-color:var(--p);color:var(--p)}
.pv-step span{display:block;font-size:.75rem;font-weight:600;color:var(--t1)}.pv-step small{font-size:.62rem;color:var(--t3)}
.pv-arrow{color:var(--t3);font-size:.7rem;padding:0 .2rem}

/* Quick Actions */
.quick-actions{padding:1rem;display:flex;flex-direction:column;gap:.5rem}
.qa-btn{width:100%;padding:.6rem 1rem;background:var(--bg2);border:1px solid var(--bd);border-radius:var(--r3);color:var(--t1);font-family:var(--f);font-size:.82rem;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:var(--tr)}
.qa-btn:hover{background:var(--bg3);border-color:var(--bdl)}.qa-btn i{color:var(--p);width:16px;text-align:center}
.qa-btn.qa-primary{background:var(--p);border-color:var(--p);color:#fff}.qa-btn.qa-primary i{color:#fff}
.qa-btn.qa-primary:hover{background:var(--ph)}

/* Activity */
.activity-list{padding:1rem;max-height:200px;overflow-y:auto}
.activity-empty{text-align:center;padding:1.5rem;color:var(--t3)}.activity-empty i{font-size:2rem;margin-bottom:.5rem;display:block;opacity:.3}
.activity-empty p{font-size:.82rem}
.act-item{display:flex;align-items:center;gap:.6rem;padding:.5rem 0;border-bottom:1px solid var(--bd);font-size:.8rem}
.act-item:last-child{border:0}.act-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}
.act-dot.ad-g{background:var(--g)}.act-dot.ad-b{background:var(--p)}.act-dot.ad-a{background:var(--a)}
.act-item span{flex:1;color:var(--t1)}.act-item small{color:var(--t3);font-size:.68rem}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CONNECTOR MODULE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.platform-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem}
.plat-card{background:var(--card);border:1px solid var(--bd);border-radius:var(--r1);overflow:hidden;transition:var(--tr)}
.plat-card:hover{border-color:var(--p);box-shadow:var(--s2)}
.plat-head{padding:.85rem 1.1rem;display:flex;align-items:center;gap:.5rem;color:#fff}
.plat-head h4{flex:1;font-size:.9rem;font-weight:600}.plat-head i{font-size:1.2rem}
.plat-tag{padding:.12rem .45rem;border-radius:var(--rf);background:rgba(255,255,255,.2);font-size:.6rem;font-weight:600;text-transform:uppercase}
.teams{background:var(--teams)}.zoom{background:var(--zoom)}.gmeet{background:var(--gmeet)}.fileu{background:var(--bg3)}
.plat-body{padding:1rem}
.plat-features{list-style:none;margin-bottom:.8rem}.plat-features li{padding:.2rem 0;font-size:.78rem;color:var(--t2);display:flex;align-items:center;gap:.35rem}.plat-features i{color:var(--g);font-size:.65rem}

.drop-zone{border:2px dashed var(--bd);border-radius:var(--r2);padding:1.2rem;text-align:center;cursor:pointer;transition:var(--tr);margin-bottom:.8rem}
.drop-zone:hover,.drop-zone.dragover{border-color:var(--p);background:var(--pbg)}
.drop-zone i{font-size:1.8rem;color:var(--t3);display:block;margin-bottom:.4rem}.drop-zone p{font-size:.82rem;color:var(--t2)}.drop-zone small{font-size:.68rem;color:var(--t3)}

.import-result{background:var(--card);border:2px solid var(--g);border-radius:var(--r1);padding:1.3rem;margin-top:1.5rem;text-align:center}
.ir-head{display:flex;align-items:center;justify-content:center;gap:.5rem;color:var(--g);margin-bottom:.8rem}.ir-head i{font-size:1.2rem}
.ir-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:.5rem;margin-bottom:1rem}
.ir-item{background:var(--bg2);border-radius:var(--r3);padding:.4rem .6rem;text-align:center}.ir-item small{display:block;font-size:.6rem;color:var(--t3);text-transform:uppercase;margin-bottom:.1rem}.ir-item b{font-size:.9rem;color:var(--t0)}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   INPUT MODULE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.input-panel{background:var(--card);border:1px solid var(--bd);border-radius:var(--r1);padding:1.5rem}
.meta-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.8rem;margin-bottom:1.2rem}
.fg{display:flex;flex-direction:column;gap:.2rem}
.fg label{font-size:.74rem;font-weight:600;color:var(--t2);display:flex;align-items:center;gap:.25rem}.fg label i{color:var(--p);font-size:.68rem}
.fg input,.fg select,.fg textarea{padding:.5rem .65rem;background:var(--input);border:1px solid var(--bd);border-radius:var(--r3);color:var(--t0);font-family:var(--f);font-size:.85rem;transition:var(--tr)}
.fg input:focus,.fg select:focus,.fg textarea:focus{outline:0;border-color:var(--p);box-shadow:0 0 0 2px var(--pbg)}

.ta-container{margin-bottom:1.2rem}
.ta-toolbar{display:flex;align-items:center;justify-content:space-between;padding:.4rem .65rem;background:var(--bg2);border:1px solid var(--bd);border-radius:var(--r2) var(--r2) 0 0;border-bottom:0;flex-wrap:wrap;gap:.3rem}
.tb-btn{padding:.2rem .5rem;background:var(--card);border:1px solid var(--bd);border-radius:var(--r3);color:var(--t2);font-size:.7rem;font-weight:500;cursor:pointer;transition:var(--tr);display:flex;align-items:center;gap:.2rem}
.tb-btn:hover{background:var(--p);color:#fff;border-color:var(--p)}
.ta-info{display:flex;align-items:center;gap:.4rem;margin-left:auto}
.src-badge{padding:.15rem .45rem;border-radius:var(--rf);font-size:.62rem;font-weight:600;background:var(--pbg);color:var(--p);border:1px solid rgba(99,102,241,.12);display:flex;align-items:center;gap:.2rem}
.src-badge.teams{background:rgba(91,95,199,.08);color:var(--teams)}.src-badge.zoom{background:rgba(45,140,255,.08);color:var(--zoom)}.src-badge.gmeet{background:rgba(234,67,53,.08);color:var(--gmeet)}
#wordCount,#charCount{font-size:.65rem;color:var(--t3)}
#transcript{width:100%;min-height:220px;padding:.8rem;resize:vertical;background:var(--input);border:1px solid var(--bd);border-top:0;border-radius:0 0 var(--r2) var(--r2);color:var(--t0);font-family:var(--f);font-size:.88rem;line-height:1.7}
#transcript:focus{outline:0;border-color:var(--p)}#transcript::placeholder{color:var(--t3)}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BUTTONS
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.btn{display:inline-flex;align-items:center;gap:.4rem;padding:.55rem 1.1rem;border:1px solid var(--bd);border-radius:var(--r2);background:var(--card);color:var(--t0);font-family:var(--f);font-size:.84rem;font-weight:500;cursor:pointer;transition:var(--tr);white-space:nowrap}
.btn:hover{background:var(--bg3);transform:translateY(-1px)}
.btn-primary{background:var(--p);border-color:var(--p);color:#fff}.btn-primary:hover{background:var(--ph)}
.btn-teams{background:var(--teams);border-color:var(--teams);color:#fff}.btn-zoom{background:var(--zoom);border-color:var(--zoom);color:#fff}.btn-gmeet{background:var(--gmeet);border-color:var(--gmeet);color:#fff}
.btn-file{background:var(--bg3);color:var(--t0)}.btn-sm{padding:.35rem .7rem;font-size:.76rem}
.btn-block{width:100%;justify-content:center}
.btn-big{padding:.85rem;font-size:1rem;font-weight:600;position:relative;overflow:hidden}
.btn-big::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.12),transparent);transform:translateX(-100%);transition:.5s}
.btn-big:hover::after{transform:translateX(100%)}
.spinner{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   AI CONFIG MODULE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.ai-grid{max-width:700px}
.ai-option{display:flex;align-items:flex-start;gap:.65rem;padding:.85rem;border:1px solid var(--bd);border-radius:var(--r2);margin-bottom:.5rem;cursor:pointer;transition:var(--tr)}
.ai-option:hover,.ai-option.active{border-color:var(--p);background:var(--pbg)}
.ai-option input{margin-top:.25rem;accent-color:var(--p)}
.ao-icon{width:34px;height:34px;border-radius:var(--r3);background:var(--bg2);display:flex;align-items:center;justify-content:center;color:var(--p);flex-shrink:0;font-size:.9rem}
.ao-info strong{display:block;font-size:.85rem;margin-bottom:.1rem}.ao-info p{font-size:.72rem;color:var(--t3);margin-bottom:.2rem}.ao-info a{font-size:.72rem}
.ai-key-box{padding:.8rem .8rem .8rem 2.2rem;background:var(--bg2);border-radius:var(--r2);margin-bottom:.5rem}
.ai-key-box label{display:flex;align-items:center;gap:.3rem;font-size:.78rem;font-weight:600;color:var(--t2);margin-bottom:.35rem}.ai-key-box label i{color:var(--a)}
.akb-row{display:flex;gap:.35rem}.akb-row input{flex:1;padding:.45rem .6rem;background:var(--input);border:1px solid var(--bd);border-radius:var(--r3);color:var(--t0);font-family:monospace;font-size:.8rem}
.akb-row input:focus{outline:0;border-color:var(--p)}
.akb-result{margin-top:.4rem;font-size:.74rem;padding:.35rem .5rem;border-radius:var(--r3)}
.akb-result.ok{background:var(--gbg);color:var(--g)}.akb-result.fail{background:rgba(239,68,68,.07);color:var(--r)}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MINUTES MODULE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.mom-empty,.carbon-empty{text-align:center;padding:3rem 1rem;color:var(--t3)}
.mom-empty i,.carbon-empty i{font-size:3rem;opacity:.2;display:block;margin-bottom:.8rem}
.mom-empty h4,.carbon-empty h4{font-size:1.1rem;color:var(--t1);margin-bottom:.3rem}
.mom-empty p,.carbon-empty p{font-size:.85rem;margin-bottom:1rem}

.mom-toolbar{display:flex;flex-wrap:wrap;gap:.4rem;margin-bottom:1rem}
.mom-doc{display:flex;flex-direction:column;gap:.9rem}
.ms{background:var(--card);border:1px solid var(--bd);border-radius:var(--r1);padding:1.2rem;transition:var(--tr);animation:fadeIn .4s ease backwards}
.ms:hover{border-color:var(--p)}.ms-head{background:linear-gradient(135deg,var(--p),var(--v));color:#fff;border:0}
.ms-top{display:flex;justify-content:space-between;align-items:flex-start;gap:.6rem;margin-bottom:.7rem;flex-wrap:wrap}
.ms-top h3{font-size:1.2rem;font-weight:700}
.badge-row{display:flex;gap:.25rem;flex-wrap:wrap}
.badge{padding:.12rem .45rem;border-radius:var(--rf);font-size:.58rem;font-weight:600;letter-spacing:.4px;text-transform:uppercase;background:rgba(255,255,255,.2)}.b2{background:rgba(255,255,255,.12)}
.ms-meta{display:flex;flex-wrap:wrap;gap:.8rem;font-size:.8rem;opacity:.9}.ms-meta span{display:flex;align-items:center;gap:.25rem}
.ms h4{font-size:.92rem;font-weight:600;margin-bottom:.6rem;display:flex;align-items:center;gap:.4rem}.ms h4 i{color:var(--p);font-size:.82rem}
.ai-box{padding:.7rem .9rem;background:var(--pbg);border-left:3px solid var(--p);border-radius:var(--r3)}.ai-box p{color:var(--t1);font-size:.88rem;line-height:1.8}
.ml{list-style:none;display:flex;flex-direction:column;gap:.35rem}
.ml li{padding:.5rem .7rem;background:var(--bg2);border-radius:var(--r3);border-left:3px solid var(--p);font-size:.85rem;color:var(--t1);transition:var(--tr)}.ml li:hover{transform:translateX(3px)}
.ml-g li{border-left-color:var(--g)}.ml-a li{border-left-color:var(--a)}
.tw{overflow-x:auto}
.mtable{width:100%;border-collapse:separate;border-spacing:0;font-size:.78rem}
.mtable thead{background:var(--bg2)}.mtable th{padding:.5rem .6rem;text-align:left;font-weight:600;color:var(--t2);border-bottom:2px solid var(--bd);font-size:.68rem;text-transform:uppercase}
.mtable td{padding:.5rem .6rem;border-bottom:1px solid var(--bd)}.mtable tbody tr:hover{background:var(--bg3)}
.ptag{display:inline-block;padding:.1rem .4rem;border-radius:var(--rf);font-size:.64rem;font-weight:600;text-transform:uppercase}
.pt-h{background:rgba(239,68,68,.08);color:var(--r)}.pt-m{background:rgba(245,158,11,.08);color:var(--a)}.pt-l{background:rgba(16,185,129,.08);color:var(--g)}
.stag{display:inline-block;padding:.1rem .4rem;border-radius:var(--rf);font-size:.64rem;font-weight:600;background:var(--pbg);color:var(--p)}
.spk-wrap{display:flex;flex-wrap:wrap;gap:.4rem}
.spk-chip{display:flex;align-items:center;gap:.35rem;padding:.3rem .65rem;background:var(--bg2);border:1px solid var(--bd);border-radius:var(--rf);font-size:.78rem;transition:var(--tr)}.spk-chip:hover{border-color:var(--p)}
.spk-av{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.62rem;color:#fff}
.ms-summ{border-left:3px solid var(--p)}.ms-summ p{color:var(--t2);line-height:1.8;font-size:.88rem}
.tone-wrap{display:flex;flex-direction:column;gap:.4rem}
.tone-bar{display:flex;align-items:center;gap:.5rem}
.tone-lbl{width:85px;font-size:.75rem;font-weight:500;color:var(--t2);text-align:right}
.tone-track{flex:1;height:8px;background:var(--bg2);border-radius:4px;overflow:hidden}.tone-fill{height:100%;border-radius:4px;transition:width 1s ease}
.tone-val{width:35px;font-size:.72rem;font-weight:600;color:var(--t1)}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CARBON MODULE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.c-detected{background:var(--card);border:1px solid var(--bd);border-radius:var(--r1);padding:1rem;margin-bottom:1.2rem}
.c-det-title{font-size:.82rem;font-weight:600;color:var(--p);display:flex;align-items:center;gap:.35rem;margin-bottom:.6rem}
.c-det-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:.4rem}
.c-det-item{background:var(--bg2);border-radius:var(--r3);padding:.4rem .6rem;text-align:center}.c-det-item small{display:block;font-size:.58rem;color:var(--t3);text-transform:uppercase}.c-det-item b{font-size:.92rem;color:var(--t0)}

.c-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem}
.c-card{background:var(--card);border:1px solid var(--bd);border-radius:var(--r1);overflow:hidden;transition:var(--tr)}.c-card:hover{border-color:var(--g)}
.cc-h{display:flex;align-items:center;gap:.5rem;padding:.8rem 1rem;border-bottom:1px solid var(--bd)}.cc-h i{font-size:1rem}.cc-h h4{font-size:.85rem;font-weight:600}
.cc-paper i{color:var(--p)}.cc-travel i{color:var(--a)}.cc-digi i{color:var(--cy)}
.cc-tot{background:linear-gradient(135deg,var(--g),#34d399);color:#fff}.cc-tot i{color:#fff}
.cc-b{padding:1rem}
.cc-row{display:flex;align-items:center;gap:.6rem;padding:.4rem .5rem;background:var(--bg2);border-radius:var(--r3);margin-bottom:.35rem;transition:var(--tr)}.cc-row:hover{transform:translateX(3px)}
.cc-i{width:32px;height:32px;border-radius:var(--r3);display:flex;align-items:center;justify-content:center;font-size:.82rem;flex-shrink:0}
.cc1{background:rgba(99,102,241,.08);color:var(--p)}.cc2{background:rgba(16,185,129,.08);color:var(--g)}.cc3{background:rgba(239,68,68,.08);color:var(--r)}.cc4{background:rgba(6,182,212,.08);color:var(--cy)}.cc5{background:rgba(245,158,11,.08);color:var(--a)}.cc6{background:rgba(236,72,153,.08);color:var(--pk)}.cc7{background:rgba(139,92,246,.08);color:var(--v)}.cc8{background:rgba(245,158,11,.08);color:var(--a)}.cc9{background:rgba(99,102,241,.08);color:var(--p)}.cc10{background:rgba(16,185,129,.08);color:var(--g)}
.cc-row b{display:block;font-size:1rem;color:var(--t0)}.cc-row small{font-size:.65rem;color:var(--t3)}

.c-total{grid-column:1/-1}
.c-tot-flex{display:flex;align-items:center;gap:2rem;flex-wrap:wrap;justify-content:center;margin-bottom:1.2rem}
.c-donut{position:relative;width:150px;height:150px}.c-donut svg{width:100%;height:100%;transform:rotate(-90deg)}
.d-bg{fill:none;stroke:var(--bd);stroke-width:10}.d-fill{fill:none;stroke:var(--g);stroke-width:10;stroke-linecap:round;stroke-dasharray:502;stroke-dashoffset:502;transition:stroke-dashoffset 1.5s ease}
.c-donut-center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}
.cdc-val{display:block;font-size:1.5rem;font-weight:800;color:var(--g)}.cdc-unit{font-size:.68rem;color:var(--t3)}
.c-breakdown{display:flex;flex-direction:column;gap:.35rem;min-width:180px}
.cb-row{display:flex;align-items:center;gap:.4rem;padding:.35rem .5rem;background:var(--bg2);border-radius:var(--r3);font-size:.78rem}
.cb-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}.cb-row.g .cb-dot{background:var(--g)}.cb-row.r .cb-dot{background:var(--r)}.cb-row.n .cb-dot{background:var(--p)}
.cb-row span{display:none}.cb-row::after{content:attr(data-l)}.cb-row{color:var(--t2)}.cb-row b{margin-left:auto;color:var(--t0);font-size:.8rem}
.cb-row.n{background:var(--pbg)}

.c-equiv{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem;margin-bottom:1rem}
.ce{text-align:center;padding:.6rem;background:var(--bg2);border:1px solid var(--bd);border-radius:var(--r2)}.ce i{font-size:1.1rem;color:var(--g);display:block;margin-bottom:.2rem}.ce b{display:block;font-size:1.1rem;font-weight:700;color:var(--t0)}.ce small{font-size:.6rem;color:var(--t3)}
.c-compare{display:flex;flex-direction:column;gap:.5rem;margin-bottom:.8rem}
.cmp-bar{display:flex;align-items:center;gap:.6rem}.cmp-lbl{width:60px;font-size:.75rem;font-weight:500;color:var(--t2);text-align:right}
.cmp-track{flex:1;height:22px;background:var(--bg2);border-radius:var(--r3);overflow:hidden}
.cmp-fill{height:100%;border-radius:var(--r3);transition:width 1.5s ease}.cmp-phys{background:linear-gradient(90deg,var(--r),#f87171)}.cmp-digi{background:linear-gradient(90deg,var(--g),#34d399)}
.cmp-val{width:70px;font-size:.72rem;font-weight:600;color:var(--t1)}
.c-verdict{padding:.65rem;background:var(--gbg);border:1px solid rgba(16,185,129,.12);border-radius:var(--r2);text-align:center;font-size:.82rem;color:var(--g);font-weight:500;display:flex;align-items:center;justify-content:center;gap:.35rem}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   EXPORT MODULE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.export-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
.export-card{background:var(--card);border:1px solid var(--bd);border-radius:var(--r1);padding:1.3rem;text-align:center;transition:var(--tr)}
.export-card:hover{border-color:var(--p);box-shadow:var(--s2)}
.ec-icon{font-size:2rem;color:var(--p);margin-bottom:.6rem}.export-card h4{font-size:.92rem;font-weight:600;margin-bottom:.3rem}.export-card p{font-size:.78rem;color:var(--t2);margin-bottom:1rem}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SDG MODULE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.sdg-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}
.sdg-card{background:var(--card);border:1px solid var(--bd);border-top:4px solid var(--sc);border-radius:var(--r1);padding:1.3rem;transition:var(--tr)}
.sdg-card:hover{transform:translateY(-3px);box-shadow:var(--s2)}
.sdg-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}
.sdg-head span{font-size:2rem;font-weight:900;color:var(--sc);opacity:.3}.sdg-head i{font-size:1.2rem;color:var(--sc);opacity:.4}
.sdg-card h4{font-size:.88rem;font-weight:700;margin-bottom:.35rem}.sdg-card p{font-size:.76rem;color:var(--t2);line-height:1.7}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TOAST
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.toast{position:fixed;bottom:-70px;left:50%;transform:translateX(-50%);padding:.6rem 1.2rem;background:var(--g);color:#fff;border-radius:var(--r2);display:flex;align-items:center;gap:.4rem;font-weight:500;font-size:.82rem;box-shadow:var(--s2);transition:bottom .35s cubic-bezier(.4,0,.2,1);z-index:9999}
.toast.show{bottom:20px}.toast.err{background:var(--r)}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   RESPONSIVE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
@media(max-width:768px){
    .sidebar{transform:translateX(-100%);width:260px;z-index:200}
    .sidebar.open{transform:translateX(0)}
    .main{margin-left:0!important}
    .topbar-menu{display:block}
    .topbar-pipeline{display:none}
    .dash-stats{grid-template-columns:1fr 1fr}
    .dash-grid,.platform-grid,.c-grid,.export-grid,.sdg-grid{grid-template-columns:1fr}
    .pipeline-visual{flex-direction:column;gap:.5rem}
    .pv-arrow{transform:rotate(90deg)}
    .c-tot-flex{flex-direction:column}
    .c-equiv{grid-template-columns:1fr 1fr}
    .meta-grid{grid-template-columns:1fr 1fr}
}

/* PRINT */
@media print{
    .sidebar,.topbar,.mom-toolbar,.toast{display:none!important}
    .main{margin-left:0!important}
    .module{display:block!important;padding:0}
    #mod-dashboard,#mod-connector,#mod-input,#mod-ai-config,#mod-export,#mod-sdg{display:none!important}
    .ms{break-inside:avoid;box-shadow:none;border:1px solid #ddd}
    body{background:#fff;color:#000}
}

::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:var(--bg0)}::-webkit-scrollbar-thumb{background:var(--bd);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:var(--p)}
